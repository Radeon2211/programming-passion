(this["webpackJsonpprogramming-passion"]=this["webpackJsonpprogramming-passion"]||[]).push([[13],{520:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),c=n(5),a=n(36),r=n(56),s=n(43),l=n(78),u=n(115),d=n(116),p=n(13),f=n(14),m=n(55),h=l.a({title:l.b().max(200).trim().required(),content:l.b().max(1200).trim().required()});e.default=Object(a.firestoreConnect)((function(t){return[{collection:"posts",doc:t.match.params.id,storeAs:"post"}]}))((function(t){var e=Object(i.useRef)({title:null,content:null}),n=Object(c.d)((function(t){return t.post.canWritePost})),a=Object(c.d)((function(t){return void 0===t.firestore.data.post?void 0:t.firestore.data.post})),l=Object(c.c)(),b=Object(i.useCallback)((function(){return l(p.k())}),[l]);Object(i.useEffect)((function(){b()}),[b]);var v=Object(i.useCallback)((function(){e.current={title:a.title,content:a.content}}),[a]);Object(i.useEffect)((function(){a&&!e.current.title&&v()}),[v,a]);var E=t.dispatch;Object(i.useEffect)((function(){return function(){E({type:r.actionTypes.CLEAR_DATA,preserve:{ordered:!0,data:["allPosts","comments","userPosts"]}})}}),[E]);var j=function(){t.history.goBack()};return null===a?o.a.createElement(f.a,{variant:"H6"},"This post does not exists"):void 0===a?o.a.createElement(m.a,{size:"Small"}):o.a.createElement(s.c,{initialValues:{title:a.title,content:a.content},validationSchema:h,onSubmit:function(i){var o,c,a,r;i.title!==e.current.title||i.content!==e.current.content?(o=i,c=t.match.params.id,a=t.history,r=n,l(p.p(o,c,a,r))):t.history.push("/posts/".concat(t.match.params.id))}},(function(t){var e=t.errors,n=t.touched,i=t.isValid,c=t.dirty,r=t.setFieldTouched;return o.a.createElement(u.a,{headingText:"Edit Post".concat(a?": ".concat(a.title):""),btnText:"Edit",isValid:i&&c,isPostForm:!0,cancelled:j},o.a.createElement(d.a,{kind:"input",config:{type:"text",name:"title",id:"title",placeholder:"Post title...",autoComplete:"off",onInput:r.bind(void 0,"title",!0,!0)},label:"Title",isValid:!e.title,isTouched:n.title}),o.a.createElement(d.a,{kind:"textarea",config:{name:"content",id:"content",placeholder:"Share your thoughts...",onInput:r.bind(void 0,"content",!0,!0)},label:"Content",isValid:!e.content,isTouched:n.content}))}))}))}}]);