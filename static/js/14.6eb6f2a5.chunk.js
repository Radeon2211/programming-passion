(this["webpackJsonpprogramming-passion"]=this["webpackJsonpprogramming-passion"]||[]).push([[14],{486:function(t,e,n){"use strict";n.r(e);var c=n(60),a=n(27),o=n(16),i=n(0),r=n.n(i),s=n(91),u=n(3),l=n(28),f=n(4),p=n(43),d=n(11),b=n(12),h=n(42);e.default=Object(l.firestoreConnect)((function(t){return[{collection:"posts",doc:t.match.params.id,storeAs:"post"}]}))((function(t){var e=Object(i.useRef)({title:null,content:null}),n=Object(i.useState)({title:Object(f.f)("input","Title","",{type:"text",id:"title",autoComplete:"off",placeholder:"Post title..."},{minLength:1,maxLength:200}),content:Object(f.f)("textarea","Content","",{id:"content",placeholder:"Share your thoughts..."},{minLength:1,maxLength:1200})}),l=Object(o.a)(n,2),j=l[0],v=l[1],O=Object(u.d)((function(t){return t.post.canWritePost})),m=Object(u.d)((function(t){return void 0===t.firestore.data.post?void 0:t.firestore.data.post})),g=Object(u.c)(),E=Object(i.useCallback)((function(){return g(d.k())}),[g]);Object(i.useEffect)((function(){E()}),[E]);var x=Object(i.useCallback)((function(){v((function(t){return Object(a.a)({},t,{title:Object(f.i)(j.title,{value:m.title,valid:!0}),content:Object(f.i)(j.content,{value:m.content,valid:!0})})})),e.current={title:m.title,content:m.content}}),[j,m]);Object(i.useEffect)((function(){m&&""===j.title.value&&x()}),[x,j,m]);var y=t.dispatch;Object(i.useEffect)((function(){return function(){y({type:p.actionTypes.CLEAR_DATA,preserve:{ordered:!0,data:["allPosts","comments","userPosts"]}})}}),[x,y]);var k=Object(f.e)(j,(function(t,e){e.persist(),v((function(n){return Object(a.a)({},n,Object(c.a)({},t,Object(f.i)(j[t],{value:e.target.value,valid:Object(f.c)(e.target.value,j[t].validation),touched:!0})))}))}));h.a;return null===m?r.a.createElement(b.a,{variant:"H6"},"This post does not exists"):r.a.createElement(s.a,{headingText:"Edit Post".concat(m?": ".concat(m.title):""),btnText:"Edit",isValid:Object(f.b)(j),submitted:function(n){n.preventDefault();var c={};for(var a in j)c[a]=j[a].value.trim();c.title!==e.current.title||c.content!==e.current.content?function(t,e,n,c){g(d.p(t,e,n,c))}(c,t.match.params.id,t.history,O):t.history.push("/posts/".concat(t.match.params.id))},isPostForm:!0,cancelled:function(){t.history.goBack()}},k)}))}}]);